---
title: Setting up a Scalable RStudio Instance in AWS
author: Sebastian Schweer
date: '2018-01-05'
categories:
  - AWS
  - R
tags:
  - Getting Started
  - RStudio AMI
slug: setting-up-a-scalable-rstudio-instance-in-aws
---

# Setting up an R Environment: Available Anytime, Anywhere?

 Assume you want to start to write `R` code (a very good decision, in my opinion) and you want to be able to write and test code whereever you are. Wouldn't it be awesome if one could set up an environment that can be used for `R` coding independent of any device? Where all you need is a decent browser, a working internet connection and you're good to go?
 
Indeed it would be! (I love rhethorical questions...) In this post, I will show you the steps for setting up such an environment on Amazon Web Services (AWS). The main advantages of using such a set-up:
\itemize
\item Runs on any infrastructure: All you need is a working internet connection, a decent browser and an AWS account, which is usually free.*Footnote: For a given value of usually. I personally try to test out lots of resources just because I can, yet even so, my total expenses for AWS result in 0.37€ (January 2018). A related point
\item Runs everywhere: The AWS machine will be set up to automatically clone your GitHub repository (don't worry if this doesn't mean anything to you, this point is optional), so that you don't even have to have your codes on the device.
\item Scalable: The AWS machine running your code can be chosen to suit any of your needs, in any session. Just playing around with a new package? Use the smallest size, doesn't cost a dime. Trying to re-create Google's preformance on a fancy DNN-classification? Go all in with 500 GB of RAM; it'll cost ya, but it's fun.
\item Up-to-Date: Since the envirionment is freshly installed each time, your `R` version as well as the package versions in use are automatically up-to-date. In the latter case, that would also be easy to maintain on a local machine, the former, however, is a nice benefit. 

Convinced? Awesome, let's get started!

## Overview of main steps

First a short overview of the main steps covered in this blog post:

1. Get an AWS account (duh!),
2. Find the right RStudio AMI,
3. Configure the security group for your RStudio instance,
4. Create a launch template in AWS,
4a. Incorporate a clone of your GitHub repo, 
5. Run a super-sophisticated algorithm on our spankingly new machine.

Preconditions for this tutorial should be basically none, at least in terms of coding and/or understanding `R` itself. The main task will lie in clicking the right buttons.

### Step 1: Get an AWS account.

Well, it isn't really my place to tell you how to use AWS if Amazon itself did such a great job explaining it <HERE>. Just use the link to set up your account, and I further suggest to follow the following set of instructions <HERE>, building your very first instance. Take your time going through these instructions, I'll wait...

Ready? Alright, sweet. Then we continue with 

### Step 2: Find the current RStudio AMI.

AMI stands for Amazon Machine Images, which is like an operating system container. More to the point, in an AMI a Linux distribution can be bundled with addtional software packages tailored to any type of need: web development, accounting (I'm guessing here, but ... sure) and, most importantly, using RStudio. <HERE> you can find a wonderful storage of RStudio AMIs. We use the newest version for the correct geographical zone, in my case Frankfurt:

[![Screenshot_Louis_Anslett](/img/screenshot_louisaslett.png)](http://www.louisaslett.com/RStudio_AMI/)

As you can see, thanks to Louis Anslett’s work, the AMI includes not only the newest version of RStudio but also of `R itself as well as a handful of helpful additional software packages. For instance, Git comes pre-installed, which we will use later on; also `Julia`is installed for those looking to try out the possible future of data science languages. But I’m deviating, let’s get back on track with 

### Step 3: Configure the security groups for your RStudio instance

In AWS, security groups control the access to the machine over the internet (if you don‘t care about how exactly this works and only want to follow the instructions, just skip the next sentences). More precisely, they define which kind of protocols may use which ports on your machine from a given IP range. For example, you can set the access rights for a ssh protocol to be able to connect to your machine on port 22 only from your personal IP address at home. 

In our case, we actually only need access via http protocol, since the RStudio instance will allow log-in via browser interface. Therefore, our security group can be kept quite simple:

The IP range can be limited to a certain range of addresses to increase the safety of your instance. This precaution is necessary since only the login page of RStudio stands between the internet and your instance (spooky, huh?). The range used by your provider can be found by googling, in my case I use the list provided <HERE>.

### Step 4: Create a launch template in AWS

We now configure a launch template in AWS to simplify the process of starting up our RStudio instance in the future. This step is not entirely necessary, but I highly recommend it due to its simplicity and benefits. Begin by starting the launch template wizard on the AWS Dashboard Side Panel. The only things necessary for the set-up are the AMI of step 2 and the security groups from step 3 (see how neatly this all ties together? Almost as if somebody thought it through...). The only thing left to do is to choose the type of instance to start by default. I recommend to set the lowest ranking instance by default: It is still capable of running basic analyses, yet it doesn‘t cost a thing. Before clicking the finish button:

FINISH BUTTON,

there are two small (optional) additions that can be handled with the so-called XXXX:

### Step 4a: Resetting the RStudio password

In the documentation of the RStudio AMI we can find the following part: „xxx“. Alright, fine, but it bothers me to have to do that EVERY SINGLE TIME I log on. There‘s a nicer way to do this, and XXXX provides just the framework: All commands placed here get executed at the beginning of the start-up. Thus, we only need to run the code to change the password for the user RStudio, i.e.
CODE
Sudo kkkkk
CODE,
Right? Unfortunately, AWS XXX understands only BBBB encoded commands (please don‘t ask me why), we first need to transform this command into the new encoding. In Linux, this is as simple as 
CODE
Encode
CODE,
In Windows this can be done by doing ....

We are almost done with the set-up now, there only remains 

### Step 4b: Automatically Clone a GitHub repo

I write all my private code projects on my GitHub account (here: YYY. What a shameless plug) and I also would like my code to be available for me each time I start up my RStudio instance. Fortunately, this is easily configured with XXX, by just adding the commands 

CODE
Git 
CODE
and running the encoding steps as in Step 4a. Now, each time I start up a new RStudio instance, the repo ZZZ gets cloned into the folder AAA, ready to work. If I alter the code on the instance, I can push my changes to the repo and all that, the connections are already correctly set in the security groups (see Step 3).
